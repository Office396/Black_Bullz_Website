"use strict";(()=>{var e={};e.id=802,e.ids=[802],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},2880:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>y,patchFetch:()=>w,requestAsyncStorage:()=>_,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var t={};r.r(t),r.d(t,{DELETE:()=>p,GET:()=>u,POST:()=>c,PUT:()=>l});var o=r(3278),i=r(5002),n=r(4877),a=r(1309),d=r(4792);async function u(){try{let e=await (0,d.kk)();return a.NextResponse.json({success:!0,data:e})}catch(e){return console.error("Failed to get items:",e),a.NextResponse.json({success:!0,data:[]})}}async function c(e){try{let s=await e.json();if(!s.title||!s.category||!s.description)return a.NextResponse.json({success:!1,error:"Missing required fields"},{status:400});let r=await (0,d.jX)(s);return a.NextResponse.json({success:!0,data:r})}catch(e){return console.error("Failed to add item:",e),a.NextResponse.json({success:!1,error:"Failed to add item"},{status:500})}}async function l(e){try{let{id:s,...r}=await e.json();if(!s)return a.NextResponse.json({success:!1,error:"Item ID required"},{status:400});let t=await (0,d.$G)(s,r);if(!t)return a.NextResponse.json({success:!1,error:"Item not found"},{status:404});return a.NextResponse.json({success:!0,data:t})}catch(e){return console.error("Failed to update item:",e),a.NextResponse.json({success:!1,error:"Failed to update item"},{status:500})}}async function p(e){try{let{id:s}=await e.json();if(!s)return a.NextResponse.json({success:!1,error:"Item ID required"},{status:400});if(!await (0,d.wz)(s))return a.NextResponse.json({success:!1,error:"Item not found"},{status:404});return a.NextResponse.json({success:!0})}catch(e){return console.error("Failed to delete item:",e),a.NextResponse.json({success:!1,error:"Failed to delete item"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/items/route",pathname:"/api/items",filename:"route",bundlePath:"app/api/items/route"},resolvedPagePath:"C:\\wd\\web2\\app\\api\\items\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:_,staticGenerationAsyncStorage:h,serverHooks:g}=m,y="/api/items/route";function w(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},4792:(e,s,r)=>{r.d(s,{$G:()=>n,jX:()=>i,kk:()=>o,wz:()=>a});var t=r(1482);async function o(){try{let{data:e,error:s}=await t.O.from("items").select("*").order("upload_date",{ascending:!1});if(s)return console.error("Error fetching items:",s),[];return(e||[]).map(e=>({...e,longDescription:e.long_description,releaseDate:e.release_date,keyFeatures:e.key_features||[],screenshots:e.screenshots||[],systemRequirements:e.system_requirements,androidRequirements:e.android_requirements,sharedPinCode:e.shared_pin_code,sharedRarPassword:e.shared_rar_password,cloudDownloads:e.cloud_downloads||[]}))}catch(e){return console.error("Error in getItems:",e),[]}}async function i(e){let s=new Date,r={title:e.title,category:e.category,description:e.description,long_description:e.longDescription,developer:e.developer,size:e.size,release_date:e.releaseDate,image:e.image,rating:e.rating,trending:e.trending,latest:e.latest,key_features:e.keyFeatures,screenshots:e.screenshots,system_requirements:e.systemRequirements,android_requirements:e.androidRequirements,shared_pin_code:e.sharedPinCode,shared_rar_password:e.sharedRarPassword,cloud_downloads:e.cloudDownloads,upload_date:s.toISOString().split("T")[0]},{data:o,error:i}=await t.O.from("items").insert(r).select().single();if(i)throw console.error("Error adding item:",i),i;return{...o,longDescription:o.long_description,releaseDate:o.release_date,keyFeatures:o.key_features||[],screenshots:o.screenshots||[],systemRequirements:o.system_requirements,androidRequirements:o.android_requirements,sharedPinCode:o.shared_pin_code,sharedRarPassword:o.shared_rar_password,cloudDownloads:o.cloud_downloads||[]}}async function n(e,s){let r={};void 0!==s.title&&(r.title=s.title),void 0!==s.category&&(r.category=s.category),void 0!==s.description&&(r.description=s.description),void 0!==s.longDescription&&(r.long_description=s.longDescription),void 0!==s.developer&&(r.developer=s.developer),void 0!==s.size&&(r.size=s.size),void 0!==s.releaseDate&&(r.release_date=s.releaseDate),void 0!==s.image&&(r.image=s.image),void 0!==s.rating&&(r.rating=s.rating),void 0!==s.trending&&(r.trending=s.trending),void 0!==s.latest&&(r.latest=s.latest),void 0!==s.keyFeatures&&(r.key_features=s.keyFeatures),void 0!==s.screenshots&&(r.screenshots=s.screenshots),void 0!==s.systemRequirements&&(r.system_requirements=s.systemRequirements),void 0!==s.androidRequirements&&(r.android_requirements=s.androidRequirements),void 0!==s.sharedPinCode&&(r.shared_pin_code=s.sharedPinCode),void 0!==s.sharedRarPassword&&(r.shared_rar_password=s.sharedRarPassword),void 0!==s.cloudDownloads&&(r.cloud_downloads=s.cloudDownloads),void 0!==s.uploadDate&&(r.upload_date=s.uploadDate);let{data:o,error:i}=await t.O.from("items").update(r).eq("id",e).select().single();return i?(console.error("Error updating item:",i),null):{...o,longDescription:o.long_description,releaseDate:o.release_date,keyFeatures:o.key_features||[],screenshots:o.screenshots||[],systemRequirements:o.system_requirements,androidRequirements:o.android_requirements,sharedPinCode:o.shared_pin_code,sharedRarPassword:o.shared_rar_password,cloudDownloads:o.cloud_downloads||[]}}async function a(e){let{error:s}=await t.O.from("items").delete().eq("id",e);return!s||(console.error("Error deleting item:",s),!1)}},1482:(e,s,r)=>{r.d(s,{O:()=>t});let t=(0,r(3823).eI)("https://tflipxyiocgjlgfgqzhb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmbGlweHlpb2NnamxnZmdxemhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzMzczOTIsImV4cCI6MjA3NTkxMzM5Mn0.89MHB2eYC8X902R_YR_PKGVdPak7WUWSu8RbtT4TvYY")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[787,833,346],()=>r(2880));module.exports=t})();